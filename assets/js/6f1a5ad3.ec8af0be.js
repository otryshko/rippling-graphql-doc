"use strict";(self.webpackChunkrippling_graphql=self.webpackChunkrippling_graphql||[]).push([[3395],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=p(t),d=o,y=m["".concat(s,".").concat(d)]||m[d]||c[d]||a;return t?r.createElement(y,i(i({ref:n},u),{},{components:t})):r.createElement(y,i({ref:n},u))}));function d(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5300:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return u},default:function(){return m}});var r=t(7462),o=t(3366),a=(t(7294),t(3905)),i=["components"],l={id:"schema",slug:"/partners/truework/flows",title:"Flows",sidebar_position:1},s="Flows",p={unversionedId:"partners/truework/schema",id:"partners/truework/schema",isDocsHomePage:!1,title:"Flows",description:"Email flow",source:"@site/docs/partners/truework/generated.md",sourceDirName:"partners/truework",slug:"/partners/truework/flows",permalink:"/rippling-graphql-doc/docs/partners/truework/flows",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"schema",slug:"/partners/truework/flows",title:"Flows",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"API Intro",permalink:"/rippling-graphql-doc/docs/intro"},next:{title:"Consent Rules",permalink:"/rippling-graphql-doc/docs/partners/truework/consent-rules"}},u=[{value:"Email flow",id:"email-flow",children:[]}],c={toc:u};function m(e){var n=e.components,t=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"flows"},"Flows"),(0,a.kt)("h2",{id:"email-flow"},"Email flow"),(0,a.kt)("p",null,"Sandbox graphql playground is available at ",(0,a.kt)("a",{parentName:"p",href:"https://sandbox.rippling.com/api/apps/external/truework/graphql"},"https://sandbox.rippling.com/api/apps/external/truework/graphql"),". For authentication, see ",(0,a.kt)("a",{parentName:"p",href:"../../intro#authentication-in-playground"},"Authentication in playground")),(0,a.kt)("p",null,"Truework calls ",(0,a.kt)("a",{parentName:"p",href:"/docs/partners/truework/queries/employees-by-ssn"},(0,a.kt)("inlineCode",{parentName:"a"},"employeesBySsn"))," passing in the SSN and the fields it is interested in. The function will return an array of employees with matching SSN (single person will have multiple employee records if they register with different personal email addresses)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'query{\n  employeesBySsn(ssn: "238-72-5505"){\n    id\n    ssn\n    fullName\n    firstName\n    lastName\n    email\n    phone\n    employmentHistory{\n      company{\n        ...companyFields\n      }\n      roles{\n        ...roleFields\n      }\n    }\n    homeAddress{\n      streetLine1\n      streetLine2\n      zip\n      city\n      state\n      country\n    }\n    consent{\n      state\n      isAllowed\n      pendingStartedAt\n    }\n    dob\n    roles{\n      ...roleFields\n      company{\n        ...companyFields\n      }\n    }\n  }\n}\nfragment companyFields on Company {\n  id\n  name\n  status\n  taxInfos{\n    ein\n  }\n  address{\n    streetLine1\n    streetLine2\n    zip\n    city\n    state\n    country\n  }\n}\nfragment roleFields on Role {\n  startDate\n  endDate\n  state\n  job{\n    employmentType{\n      isSalaried\n    }\n    exemptionType\n    title\n    salaryUnit\n    salaryPerUnit\n  }\n  payroll{\n    last3Years{\n      year\n      compensation{\n        gross\n        net\n        base\n        bonus\n        commission\n        overtime\n        other\n      }\n    }\n    paystubs{\n      payPeriodStartDate\n      payPeriodEndDate\n      gross\n      bonus\n      overtime\n      commission\n      other\n      payPeriodHours\n    }\n  }\n}\n')),(0,a.kt)("p",null,"If API responds with ",(0,a.kt)("inlineCode",{parentName:"p"},'{\n  "data": {\n    "employeeBySsn": []\n  }\n}')," it means the employee is not registered with Rippling."),(0,a.kt)("p",null,"If Rippling knows about the employee, it will respond with basic employee info (ID, firstName, lastName and such) and will try to populate consent field."),(0,a.kt)("p",null,"If consent field is empty, it means that employee has never consented to any data sharing requests."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"isAllowed")," is a current effective state of the consent "),(0,a.kt)("p",null,"For consent state values, see ",(0,a.kt)("a",{parentName:"p",href:"/docs/partners/truework/enums/consent-state"},(0,a.kt)("inlineCode",{parentName:"a"},"ConsentState"))," enum."),(0,a.kt)("p",null,"To initiate data sharing, Truework should call\n",(0,a.kt)("a",{parentName:"p",href:"/docs/partners/truework/mutations/request-employee-consent-by-third-party"},(0,a.kt)("inlineCode",{parentName:"a"},"requestEmployeeConsentByThirdParty"))," mutation passing employee ID obtained from ",(0,a.kt)("inlineCode",{parentName:"p"},"employeeBySsn")," call. It will keep employee's consent state as ",(0,a.kt)("inlineCode",{parentName:"p"},"ASK")," but it will reset ",(0,a.kt)("inlineCode",{parentName:"p"},"pendingStartedAt")," to the current timestamp."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'mutation {\n  requestEmployeeConsentByThirdParty(employeeId: "RW1wbG95ZWU6NTgzZmQ4OTZlMTVkN2Q5OTI3YTcwNDdl", requestorName: "Loan provider company"){\n    state\n    isAllowed\n    pendingStartedAt\n  }\n}\n')),(0,a.kt)("p",null,"Employee then will get an email with links to approve or deny data sharing request. After 12 hours of no response, the request will be autoapproved (",(0,a.kt)("inlineCode",{parentName:"p"},"state")," will stay  ",(0,a.kt)("inlineCode",{parentName:"p"},"ASK")," but ",(0,a.kt)("inlineCode",{parentName:"p"},"isAllowed")," would become ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"). After another 24 hours, the request will be un-approved (",(0,a.kt)("inlineCode",{parentName:"p"},"isAllowed")," would be false)."),(0,a.kt)("p",null,"Each company in turn has control over exposing its employees data. If the company enabled Truework integration, it will show up in ",(0,a.kt)("inlineCode",{parentName:"p"},"roles")," array."))}m.isMDXComponent=!0}}]);